<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Park Faaliyet</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body{font-family:Segoe UI, sans-serif; background:#111; color:#fff; padding:20px;}
  input, textarea, button{width:100%; margin:8px 0; padding:10px; font-size:16px;}
  textarea{height:120px;}
</style>
</head>
<body>

<h2>Park Faaliyet Kaydı</h2>

<label>Tarih</label>
<input type="date" id="date">

<label>Açıklama</label>
<textarea id="desc" placeholder="Açıklama giriniz"></textarea>

<label>Resim 1</label>
<input type="file" id="img1" accept="image/*">

<label>Resim 2</label>
<input type="file" id="img2" accept="image/*">

<button onclick="kaydet()">Kaydet</button>

<script>
const DEPLOY_URL = "https://script.google.com/macros/s/AKfycbzyeVampQxZy9WoGEg6kdZ75y6zvleABnajWmdM1QXXJe74g3DWVGRIL3mD24xzMlzY4g/exec";

function kaydet(){
  const tarih = document.getElementById('date').value;
  const desc = document.getElementById('desc').value;
  const resim1 = document.getElementById('img1').files[0];
  const resim2 = document.getElementById('img2').files[0];

  if(!tarih || !desc){
    alert("Tarih ve açıklama zorunlu!");
    return;
  }

  // Base64 okuma
  const reader1 = new FileReader();
  const reader2 = new FileReader();

  reader1.onload = () => {
    reader2.onload = () => {
      fetch(DEPLOY_URL, {
        method: "POST",
        headers: {"Content-Type":"application/json"},
        body: JSON.stringify({
          tarih: tarih,
          aciklama: desc,
          resim1: reader1.result || "",
          resim2: reader2.result || ""
        })
      })
      .then(res => res.json())
      .then(res => {
        if(res.status==="success"){
          alert("Kayıt başarıyla gönderildi!");
          document.getElementById('date').value = "";
          document.getElementById('desc').value = "";
          document.getElementById('img1').value = "";
          document.getElementById('img2').value = "";
        } else {
          alert("Hata: "+res.message);
        }
      })
      .catch(err => alert("Hata: "+err));
    };
    if(resim2) reader2.readAsDataURL(resim2);
    else reader2.onload();
  };
  if(resim1) reader1.readAsDataURL(resim1);
  else reader1.onload();
}
</script>

</body>
</html>
